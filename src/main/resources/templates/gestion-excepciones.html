<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Gestión de excepciones</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-5">

    <h4>Excepciones de apertura y lectura de archivos</h4>
    <div class="d-grid gap-3 mt-4">
        <a class="btn btn-primary" href="/api/archivo/leer">Leer archivo</a>
        <a class="btn btn-outline-danger" href="/api/archivo/inexistente">Archivo No Encontrado</a>
        <a class="btn btn-outline-danger" href="/api/archivo/dañado">Archivo Dañado</a>
        <a class="btn btn-outline-danger" href="/api/archivo/formato-invalido">Formato Incorrecto</a>
        <a class="btn btn-outline-danger" href="/api/archivo/error-permisos">Error de Permisos</a>
    </div>

    <h4 class="mt-5">Excepciones de accesos a bases de datos (API propia)</h4>
    <div class="d-grid gap-3 mt-4">
        <a class="btn btn-primary" href="/api/db/listado-usuarios">Consultar tabla existente</a>
        <a class="btn btn-outline-danger" href="/api/db/tabla-inexistente">Consultar tabla inexistente</a>
        <a class="btn btn-outline-danger" href="/api/db/conexion-fallida">Fallo de conexión</a>
        <a class="btn btn-outline-danger" href="/api/db/valores-duplicados">Insertar valores duplicados</a>
        <a class="btn btn-outline-danger" href="/api/db/valores-nulos">Insertar valores Nulos</a>
    </div>

    <h4 class="mt-5">Excepciones de llamadas a APIs de terceros (REST Countries)</h4>
    <div class="d-grid gap-3 mt-4">
        <a class="btn btn-primary" href="/api/externa/recurso-existente">Consultar país</a>
        <a class="btn btn-outline-danger" href="/api/externa/recurso-inexistente">Recurso Inexistente</a>
        <a class="btn btn-outline-danger" href="/api/externa/solicitud-erronea">Solicitud mal formada</a>
    </div>

    <!-- Modal de error -->
    <div class="modal fade" id="errorModal" th:if="${resultado}">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-danger">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">Error</h5>
                    <button class="btn-close btn-close-white" data-bs-dismiss="modal" type="button"></button>
                </div>
                <div class="modal-body">
                    <p th:text="${resultado}">Mensaje de error</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script th:if="${resultado}">
    // Mostramos el modal en caso de recibir algún mensaje de error
    document.addEventListener('DOMContentLoaded', function () {
        const modalEl = document.getElementById('errorModal');
        const modal = new bootstrap.Modal(modalEl);
        modal.show();
    });
</script>

</body>
</html>